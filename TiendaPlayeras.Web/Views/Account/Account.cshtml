<!DOCTYPE html>
<html lang="en">
<head>
<title>Kairassa - Mi Cuenta</title>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="telephone=no" name="format-detection"/>
<meta content="yes" name="apple-mobile-web-app-capable"/>
<meta content="TemplatesJungle" name="author"/>
<meta content="ecommerce,fashion,store" name="keywords"/>
<meta content="Bootstrap 5 Fashion Store HTML CSS Template" name="description"/>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" rel="stylesheet"/>
<link href="css/kaira/vendor.css" rel="stylesheet" type="text/css"/>
<link href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css" rel="stylesheet">
<link href="style.css" rel="stylesheet" type="text/css"/>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Jost:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&amp;family=Marcellus&amp;display=swap" rel="stylesheet"/>
<link rel="stylesheet" href="~/css/kaira/enhanced.css">

<style>
    .account-container {
      min-height: 70vh;
      display: flex;
      align-items: center;
    }
    
    .account-card {
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      max-width: 900px;
      margin: 0 auto;
    }
    
    .account-tabs {
      background: #f8f9fa;
      border-bottom: 1px solid #dee2e6;
    }
    
    .account-tabs .nav-link {
      border: none;
      background: transparent;
      color: #6c757d;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      padding: 1.5rem 2rem;
      transition: all 0.3s ease;
    }
    
    .account-tabs .nav-link.active {
      background: #fff;
      color: #111;
      border-bottom: 3px solid #111;
    }
    
    .account-tabs .nav-link:hover {
      color: #111;
    }
    
    .form-container {
      padding: 3rem 2rem;
    }
    
    .form-title {
      font-family: 'Marcellus', serif;
      font-size: 2rem;
      color: #111;
      margin-bottom: 1.5rem;
      text-align: center;
    }
    
    .form-subtitle {
      color: #6c757d;
      text-align: center;
      margin-bottom: 2rem;
    }
    
    .form-group {
      margin-bottom: 1.5rem;
    }
    
    .form-label {
      font-weight: 500;
      color: #111;
      margin-bottom: 0.5rem;
      text-transform: uppercase;
      font-size: 0.875rem;
      letter-spacing: 0.5px;
    }
    
    .form-control {
      border: 2px solid #e9ecef;
      border-radius: 0;
      padding: 1rem;
      font-size: 1rem;
      transition: all 0.3s ease;
      background: #fff;
    }
    
    .form-control:focus {
      border-color: #111;
      box-shadow: none;
      background: #fff;
    }
    
    .btn-account {
      background: #111;
      border: 2px solid #111;
      color: #fff;
      padding: 1rem 2rem;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 1px;
      transition: all 0.3s ease;
      width: 100%;
      border-radius: 0;
    }
    
    .btn-account:hover {
      background: #fff;
      color: #111;
      border-color: #111;
    }
    
    .btn-secondary-account {
      background: transparent;
      border: 2px solid #6c757d;
      color: #6c757d;
      padding: 1rem 2rem;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 1px;
      transition: all 0.3s ease;
      width: 100%;
      border-radius: 0;
    }
    
    .btn-secondary-account:hover {
      background: #6c757d;
      color: #fff;
      border-color: #6c757d;
    }
    
    .divider {
      text-align: center;
      margin: 2rem 0;
      position: relative;
    }
    
    .divider::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 0;
      right: 0;
      height: 1px;
      background: #dee2e6;
    }
    
    .divider span {
      background: #fff;
      padding: 0 1rem;
      color: #6c757d;
      text-transform: uppercase;
      font-size: 0.875rem;
      letter-spacing: 0.5px;
    }
    
    .social-login {
      margin-top: 2rem;
    }
    
    .btn-social {
      border: 2px solid #dee2e6;
      background: #fff;
      color: #6c757d;
      padding: 0.75rem 1rem;
      margin-bottom: 0.5rem;
      transition: all 0.3s ease;
      width: 100%;
      border-radius: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }
    
    .btn-social:hover {
      border-color: #111;
      color: #111;
    }
    
    .forgot-password {
      text-align: center;
      margin-top: 1rem;
    }
    
    .forgot-password a {
      color: #6c757d;
      text-decoration: none;
      font-size: 0.875rem;
      transition: color 0.3s ease;
    }
    
    .forgot-password a:hover {
      color: #111;
    }
    
    .form-check-input:checked {
      background-color: #111;
      border-color: #111;
    }
    
    .form-check-input:focus {
      border-color: #111;
      outline: 0;
      box-shadow: 0 0 0 0.25rem rgba(17, 17, 17, 0.25);
    }
    
    
    
    /* Estilos para las alertas */
    .alert-container {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1055;
      max-width: 400px;
    }
    
    .toast-container {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 1055;
    }
  </style>
</head>
<body>
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<defs>
<symbol id="user" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M15.71 12.71a6 6 0 1 0-7.42 0a10 10 0 0 0-6.22 8.18a1 1 0 0 0 2 .22a8 8 0 0 1 15.9 0a1 1 0 0 0 1 .89h.11a1 1 0 0 0 .88-1.1a10 10 0 0 0-6.25-8.19ZM12 12a4 4 0 1 1 4-4a4 4 0 0 1-4 4Z" fill="currentColor"></path>
</symbol>
<symbol id="search" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M21.71 20.29L18 16.61A9 9 0 1 0 16.61 18l3.68 3.68a1 1 0 0 0 1.42 0a1 1 0 0 0 0-1.39ZM11 18a7 7 0 1 1 7-7a7 7 0 0 1-7 7Z" fill="currentColor"></path>
</symbol>
<symbol id="cart" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M8.5 19a1.5 1.5 0 1 0 1.5 1.5A1.5 1.5 0 0 0 8.5 19ZM19 16H7a1 1 0 0 1 0-2h8.491a3.013 3.013 0 0 0 2.885-2.176l1.585-5.55A1 1 0 0 0 19 5H6.74a3.007 3.007 0 0 0-2.82-2H3a1 1 0 0 0 0 2h.921a1.005 1.005 0 0 1 .962.725l.155.545v.005l1.641 5.742A3 3 0 0 0 7 18h12a1 1 0 0 0 0-2Zm-1.326-9l-1.22 4.274a1.005 1.005 0 0 1-.963.726H8.754l-.255-.892L7.326 7ZM16.5 19a1.5 1.5 0 1 0 1.5 1.5a1.5 1.5 0 0 0-1.5-1.5Z" fill="currentColor"></path>
</symbol>
<symbol id="heart" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M20.16 4.61A6.27 6.27 0 0 0 12 4a6.27 6.27 0 0 0-8.16 9.48l7.45 7.45a1 1 0 0 0 1.42 0l7.45-7.45a6.27 6.27 0 0 0 0-8.87Zm-1.41 7.46L12 18.81l-6.75-6.74a4.28 4.28 0 0 1 3-7.3a4.25 4.25 0 0 1 3 1.25a1 1 0 0 0 1.42 0a4.27 4.27 0 0 1 6 6.05Z" fill="currentColor"></path>
</symbol>
</defs>
</svg>

<!-- Alertas y Toasts -->
<div class="alert-container">
    <div id="loginAlert" class="alert alert-danger d-none alert-dismissible fade show" role="alert">
        <span id="loginAlertMessage"></span>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Cerrar"></button>
    </div>
    <div id="registerAlert" class="alert alert-danger d-none alert-dismissible fade show" role="alert">
        <span id="registerAlertMessage"></span>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Cerrar"></button>
    </div>
    <div id="forgotAlert" class="alert alert-danger d-none alert-dismissible fade show" role="alert">
        <span id="forgotAlertMessage"></span>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Cerrar"></button>
    </div>
</div>

<div class="toast-container">
    <div id="loginToast" class="toast align-items-center text-white bg-success border-0" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="d-flex">
            <div class="toast-body">
                Formulario de inicio de sesión enviado
            </div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Cerrar"></button>
        </div>
    </div>
    <div id="registerToast" class="toast align-items-center text-white bg-success border-0" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="d-flex">
            <div class="toast-body">
                Formulario de registro enviado
            </div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Cerrar"></button>
        </div>
    </div>
    <div id="forgotToast" class="toast align-items-center text-white bg-success border-0" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="d-flex">
            <div class="toast-body">
                Enlace de recuperación enviado
            </div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Cerrar"></button>
        </div>
    </div>
</div>

<!-- Account Section -->
<section class="account-container py-5">
<div class="container">
<div class="row justify-content-center">
<div class="col-lg-10">
<div class="account-card">
<!-- Tabs Navigation -->
<ul class="nav nav-tabs account-tabs justify-content-center" id="accountTabs" role="tablist">
<li class="nav-item" role="presentation">
<button aria-controls="login" aria-selected="true" class="nav-link active" data-bs-target="#login" data-bs-toggle="tab" id="login-tab" role="tab" type="button">
                  Iniciar Sesión
                </button>
</li>
<li class="nav-item" role="presentation">
<button aria-controls="register" aria-selected="false" class="nav-link" data-bs-target="#register" data-bs-toggle="tab" id="register-tab" role="tab" type="button">
                  Registrarse
                </button>
</li>
</ul>
<!-- Tabs Content -->
<div class="tab-content" id="accountTabContent">
<!-- Login Tab -->
<div aria-labelledby="login-tab" class="tab-pane fade show active" id="login" role="tabpanel">
<div class="form-container">
<h2 class="form-title">Bienvenido de vuelta</h2>
<p class="form-subtitle">Inicia sesión en tu cuenta para continuar</p>
<form action="/Account/Login" id="loginForm" method="post">@Html.AntiForgeryToken()
<div class="row">
<div class="col-12">
<div class="form-group">
<label class="form-label" for="loginEmail">Email</label>
<input class="form-control" id="loginEmail" name="email" placeholder="tu@email.com" required="" type="email"/>
</div>
</div>
<div class="col-12">
<div class="form-group">
<label class="form-label" for="loginPassword">Contraseña</label>
<input class="form-control" id="loginPassword" name="password" placeholder="Tu contraseña" required="" type="password"/>
</div>
</div>
<div class="col-12">
<div class="form-check mb-3">
<input class="form-check-input" id="rememberMe" name="rememberMe" type="checkbox" value=""/>
<label class="form-check-label" for="rememberMe">
                            Recordarme
                          </label>
</div>
</div>
<div class="col-12">
<button class="btn btn-account" type="submit">Iniciar Sesión</button>
</div>
</div>
</form>
<div class="forgot-password">
<a href="#" onclick="showForgotPassword()">¿Olvidaste tu contraseña?</a>
</div>
<div class="divider">
<span>o continúa con</span>
</div>
<div class="social-login">
<button class="btn btn-social" type="button">
<svg fill="#4285F4" height="20" viewbox="0 0 24 24" width="20">
<path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"></path>
<path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"></path>
<path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"></path>
<path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"></path>
</svg>
                      Continuar con Google
                    </button>
<button class="btn btn-social" type="button">
<svg fill="#1877F2" height="20" viewbox="0 0 24 24" width="20">
<path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"></path>
</svg>
                      Continuar con Facebook
                    </button>
</div>
</div>
</div>
<!-- Register Tab -->
<div aria-labelledby="register-tab" class="tab-pane fade" id="register" role="tabpanel">
<div class="form-container">
<h2 class="form-title">Crear cuenta</h2>
<p class="form-subtitle">Únete a nuestra comunidad de fashion lovers</p>
<form action="/Account/Register" id="registerForm" method="post">@Html.AntiForgeryToken()
<div class="row">
<div class="col-md-6">
<div class="form-group">
<label class="form-label" for="firstName">Nombre</label>
<input class="form-control" id="firstName" name="firstName" placeholder="Tu nombre" required="" type="text"/>
</div>
</div>
<div class="col-md-6">
<div class="form-group">
<label class="form-label" for="lastName">Apellido</label>
<input class="form-control" id="lastName" name="lastName" placeholder="Tu apellido" required="" type="text"/>
</div>
</div>
<div class="col-12">
<div class="form-group">
<label class="form-label" for="registerEmail">Email</label>
<input class="form-control" id="registerEmail" name="email" placeholder="tu@email.com" required="" type="email"/>
</div>
</div>
<div class="col-md-6">
<div class="form-group">
<label class="form-label" for="registerPassword">Contraseña</label>
<input class="form-control" id="registerPassword" minlength="6" name="password" placeholder="Tu contraseña" required="" type="password"/>

<small id="passwordHelp" class="form-text text-muted d-block mt-1">
      La contraseña debe tener <strong>mínimo 8 caracteres</strong> e incluir
      <strong>mayúsculas</strong>, <strong>minúsculas</strong>, <strong>números</strong> y 
      <strong>símbolos</strong>.
    </small>

</div>
</div>
<div class="col-md-6">
<div class="form-group">
<label class="form-label" for="confirmPassword">Confirmar contraseña</label>
<input class="form-control" id="confirmPassword" minlength="6" name="confirmPassword" placeholder="Confirma tu contraseña" required="" type="password"/>
</div>
</div>
<div class="col-12">
<div class="form-group">
<label class="form-label" for="phone">Teléfono (opcional)</label>
<input class="form-control" id="phone" name="phone" placeholder="+52 123 456 7890" type="tel"/>
</div>
</div>
<div class="col-12">
<div class="form-check mb-3">
<input class="form-check-input" id="agreeTerms" name="checkbox1" required="" type="checkbox" value=""/>
<label class="form-check-label" for="agreeTerms">
                            Acepto los <a class="text-decoration-none" href="#">términos y condiciones</a> y la 
                            <a class="text-decoration-none" href="#">política de privacidad</a>
</label>
</div>
</div>
<div class="col-12">
<div class="form-check mb-3">
<input class="form-check-input" id="newsletter" name="checkbox2" type="checkbox" value=""/>
<label class="form-check-label" for="newsletter">
                            Quiero recibir ofertas especiales y novedades por email
                          </label>
</div>
</div>
<div class="col-12">
<button class="btn btn-account" type="submit">Crear Cuenta</button>
</div>
</div>
</form>
<div class="divider">
<span>o regístrate con</span>
</div>
<div class="social-login">
<button class="btn btn-social" type="button">
<svg fill="#4285F4" height="20" viewbox="0 0 24 24" width="20">
<path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"></path>
<path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"></path>
<path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"></path>
<path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"></path>
</svg>
                      Continuar con Google
                    </button>
<button class="btn btn-social" type="button">
<svg fill="#1877F2" height="20" viewbox="0 0 24 24" width="20">
<path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"></path>
</svg>
                      Continuar con Facebook
                    </button>
</div>
</div>
</div>
<!-- Forgot Password (Hidden by default) -->
<div class="tab-pane fade" id="forgot-password" role="tabpanel">
<div class="form-container">
<h2 class="form-title">Recuperar contraseña</h2>
<p class="form-subtitle">Te enviaremos un enlace para restablecer tu contraseña</p>
<form action="/Account/ForgotPassword" id="forgotForm" method="post">@Html.AntiForgeryToken()
<div class="row">
<div class="col-12">
<div class="form-group">
<label class="form-label" for="forgotEmail">Email</label>
<input class="form-control" id="forgotEmail" name="email" placeholder="tu@email.com" required="" type="email"/>
</div>
</div>
<div class="col-12">
<button class="btn btn-account" type="submit">Enviar enlace</button>
</div>
<div class="col-12 mt-3">
<button class="btn btn-secondary-account" onclick="showLogin()" type="button">
                          Volver al inicio de sesión
                        </button>
</div>
</div>
</form>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<!-- Footer -->
<footer class="mt-5 bg-light" id="footer">
<div class="container">
<div class="row d-flex flex-wrap justify-content-between py-5">
<div class="col-md-3 col-sm-6">
<div class="footer-intro mb-4">
<a href="/Home">
<svg fill="#111" height="45" viewbox="0 0 112 45" width="112" xmlns="http://www.w3.org/2000/svg">
<path d="M2.51367 34.9297C2.58398 34.6836 2.64844 34.3789 2.70703 34.0156C2.77734 33.6523 2.83594 33.2012 2.88281 32.6621C2.92969 32.123 2.96484 31.4844 2.98828 30.7461C3.01172 29.9961 3.02344 29.123 3.02344 28.127V16.6836C3.02344 15.6875 3.01172 14.8203 2.98828 14.082C2.96484 13.332 2.92969 12.6875 2.88281 12.1484C2.83594 11.5977 2.77734 11.1406 2.70703 10.7773C2.64844 10.4141 2.58398 10.1094 2.51367 9.86328V9.79297H6.73242V9.86328C6.66211 10.1094 6.5918 10.4141 6.52148 10.7773C6.46289 11.1406 6.41016 11.5977 6.36328 12.1484C6.32812 12.6875 6.29297 13.332 6.25781 14.082C6.23438 14.8203 6.22266 15.6875 6.22266 16.6836V20.6035L16.4883 12.2188C17.6367 11.2813 18.2109 10.4727 18.2109 9.79297H23.1504V9.86328C22.459 10.0273 21.7559 10.3437 21.041 10.8125C20.3379 11.2695 19.5879 11.832 18.791 12.5L9.7207 20.0938L20.6367 32.082C21.0938 32.5508 21.4805 32.9434 21.7969 33.2598C22.125 33.5645 22.4121 33.8223 22.6582 34.0332C22.9043 34.2324 23.127 34.4023 23.3262 34.543C23.5371 34.6719 23.7539 34.8008 23.9766 34.9297V35H18.8262C18.7793 34.8945 18.6973 34.7598 18.5801 34.5957C18.4746 34.4316 18.3457 34.2617 18.1934 34.0859C18.0527 33.9102 17.8945 33.7285 17.7188 33.541C17.5547 33.3535 17.3965 33.1777 17.2441 33.0137L6.22266 20.9199V28.127C6.22266 29.123 6.23438 29.9961 6.25781 30.7461C6.29297 31.4844 6.32812 32.123 6.36328 32.6621C6.41016 33.2012 6.46289 33.6523 6.52148 34.0156C6.5918 34.3789 6.66211 34.6836 6.73242 34.9297V35H2.51367V34.9297Z"></path>
</svg>
</a>
</div>
<p class="text-muted">La mejor moda está aquí. Descubre las últimas tendencias y estilos únicos.</p>
</div>
<div class="col-md-3 col-sm-6">
<h5 class="widget-title text-uppercase mb-4">Enlaces rápidos</h5>
<ul class="menu-list list-unstyled">
<li><a class="text-muted" href="#">Inicio</a></li>
<li><a class="text-muted" href="#">Tienda</a></li>
<li><a class="text-muted" href="#">Blog</a></li>
<li><a class="text-muted" href="#">Contacto</a></li>
</ul>
</div>
<div class="col-md-3 col-sm-6">
<h5 class="widget-title text-uppercase mb-4">Ayuda</h5>
<ul class="menu-list list-unstyled">
<li><a class="text-muted" href="#">Mi cuenta</a></li>
<li><a class="text-muted" href="#">Seguimiento de pedidos</a></li>
<li><a class="text-muted" href="#">Devoluciones</a></li>
<li><a class="text-muted" href="#">FAQ</a></li>
</ul>
</div>
<div class="col-md-3 col-sm-6">
<h5 class="widget-title text-uppercase mb-4">Contacto</h5>
<p class="text-muted">¿Necesitas ayuda? <br/>
<a class="text-decoration-none" href="mailto:contact@kairassa.com">contact@kairassa.com</a>
</p>
</div>
</div>
</div>
<div class="border-top py-4">
<div class="container">
<div class="row">
<div class="col-12 text-center">
<p class="text-muted mb-0">© 2024 Kairassa. Todos los derechos reservados.</p>
</div>
</div>
</div>
</div>
</footer>
<!-- Scripts -->
<script crossorigin="anonymous" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // Form validation and interaction
    document.addEventListener('DOMContentLoaded', function() {
      // Password confirmation validation
      const registerForm = document.getElementById('registerForm');
      const password = document.getElementById('registerPassword');
      const confirmPassword = document.getElementById('confirmPassword');

      function validatePasswords() {
        if (password.value !== confirmPassword.value) {
          confirmPassword.setCustomValidity('Las contraseñas no coinciden');
          confirmPassword.classList.add('is-invalid');
        } else {
          confirmPassword.setCustomValidity('');
          confirmPassword.classList.remove('is-invalid');
        }
      }

      if (password && confirmPassword) {
        password.addEventListener('input', validatePasswords);
        confirmPassword.addEventListener('input', validatePasswords);
      }

      // Enhanced form interactions
      document.querySelectorAll('.form-control').forEach(function(input) {
        input.addEventListener('focus', function() {
          this.parentElement.classList.add('focused');
        });
        
        input.addEventListener('blur', function() {
          if (!this.value) {
            this.parentElement.classList.remove('focused');
          }
        });
      });
    });

    // Show forgot password form
    function showForgotPassword() {
      // Hide current tabs
      document.getElementById('login').classList.remove('show', 'active');
      document.getElementById('register').classList.remove('show', 'active');
      document.getElementById('login-tab').classList.remove('active');
      document.getElementById('register-tab').classList.remove('active');
      
      // Show forgot password
      document.getElementById('forgot-password').classList.add('show', 'active');
      
      // Hide tabs navigation
      document.getElementById('accountTabs').style.display = 'none';
    }

    // Show login form
    function showLogin() {
      // Hide forgot password
      document.getElementById('forgot-password').classList.remove('show', 'active');
      
      // Show login
      document.getElementById('login').classList.add('show', 'active');
      document.getElementById('login-tab').classList.add('active');
      
      // Show tabs navigation
      document.getElementById('accountTabs').style.display = 'flex';
    }

    // Función para mostrar alertas
    function showAlert(alertId, message, type = 'danger') {
        const alertBox = document.getElementById(alertId);
        const alertMessage = document.getElementById(alertId + 'Message');
        
        // Cambiar clase según el tipo
        alertBox.className = `alert alert-${type} d-none alert-dismissible fade show`;
        
        alertMessage.textContent = message;
        alertBox.classList.remove('d-none');
        
        // Ocultar automáticamente después de 5 segundos
        setTimeout(() => {
            alertBox.classList.add('d-none');
        }, 5000);
    }

    // Función para mostrar toasts
    function showToast(toastId) {
        const toastEl = document.getElementById(toastId);
        const toast = new bootstrap.Toast(toastEl);
        toast.show();
    }
  </script>

<script>
(async function(){
  // 1) Si ya hay sesión, no mostrar /Account
  try {
    const st = await fetch('/Account/Status', { credentials:'same-origin' });
    const s = await st.json();
    if (s.authenticated && s.redirect) {
      localStorage.setItem('tp_auth', JSON.stringify({ authenticated:true, roles:s.roles||[] }));
      window.location.href = s.redirect;
      return;
    } else {
      localStorage.removeItem('tp_auth');
    }
  } catch(e){ /* silencioso */ }

  function hook(formId, endpoint){
    const f = document.getElementById(formId);
    if(!f || f.dataset.bound) return; // evita doble registro
    f.dataset.bound = "1";

    f.addEventListener('submit', async (e)=>{
      e.preventDefault();

      const tokenEl = f.querySelector('input[name="__RequestVerificationToken"]');
      const token = tokenEl ? tokenEl.value : null;

      const fd = new FormData(f);
      try{
        const res = await fetch(endpoint, {
          method: 'POST',
          body: fd,
          headers: {
            'X-Requested-With': 'XMLHttpRequest',
            ...(token ? { 'RequestVerificationToken': token } : {})
          },
          credentials: 'same-origin'
        });

        // Si no es JSON (p.ej. HTML/redirect), no alertar.
        const ct = (res.headers.get('content-type') || '').toLowerCase();
        const text = await res.text();
        if (!ct.includes('application/json')) {
          // navegación iniciada o respuesta no-JSON: no espantes al usuario
          return;
        }

        let data;
        try { data = JSON.parse(text); } catch { return; } // silencioso

        if (data.ok) {
          try {
            const st = await fetch('/Account/Status', { credentials:'same-origin' });
            const s = await st.json();
            if (s.authenticated) {
              localStorage.setItem('tp_auth', JSON.stringify({ authenticated:true, roles:s.roles||[] }));
            } else {
              localStorage.removeItem('tp_auth');
            }
          } catch {}

          // Mostrar toast de éxito
          if (formId === 'loginForm') {
            showToast('loginToast');
          } else if (formId === 'registerForm') {
            showToast('registerToast');
          } else if (formId === 'forgotForm') {
            showToast('forgotToast');
          }

          if (data.redirectUrl) {
            setTimeout(() => {
              window.location.href = data.redirectUrl;
            }, 2000);
          }
        } else {
          // Mostrar alerta de error
          if (formId === 'loginForm') {
            showAlert('loginAlert', data.error || 'Error en la operación.');
          } else if (formId === 'registerForm') {
            showAlert('registerAlert', data.error || 'Error en la operación.');
          } else if (formId === 'forgotForm') {
            showAlert('forgotAlert', data.error || 'Error en la operación.');
          }
        }
      }catch(err){
        // Solo muestra si no se inicia navegación y sí es un fallo real de red
        console.warn('Network error:', err);
      }
    });
  }

  hook('loginForm','/Account/Login');
  hook('registerForm','/Account/Register');
  hook('forgotForm','/Account/ForgotPassword');
})();
</script>

</body>
</html>