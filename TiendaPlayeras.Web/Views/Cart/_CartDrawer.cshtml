@model TiendaPlayeras.Web.Models.CartSummary
@using System.Globalization
@{
    var mx = new CultureInfo("es-MX");
}

<div class="cart-drawer">
    @if (Model is null || Model.TotalItems == 0)
    {
        <div class="text-center py-5">
            <i class="fas fa-shopping-cart fa-3x text-muted mb-3"></i>
            <h6>Tu carrito está vacío</h6>
            <a href="/Catalog" class="btn btn-primary mt-3">
                <i class="fas fa-store me-2"></i>Ver catálogo
            </a>
        </div>
    }
    else
    {
        <div class="list-group list-group-flush">
            @foreach (var line in Model.Lines)
            {
                <div class="list-group-item cart-item d-flex align-items-center">
                    <img src="@(line.ImageUrl ?? "/images/placeholder.png")"
                         onerror="this.src='/images/placeholder.png'"
                         class="rounded me-3" style="width:56px;height:56px;object-fit:cover;" />
                    <div class="flex-grow-1">
                        <div class="fw-semibold">@line.ProductName</div>
                        <div class="text-muted small">Talla: @line.Size · Cant: @line.Quantity</div>
                    </div>
                    <div class="ms-3 text-end">
                        <div class="fw-bold">@line.Subtotal.ToString("C", mx)</div>
                        <button type="button" class="btn btn-sm btn-link text-danger p-0 mt-1 js-cart-remove"
                                data-cart-item-id="@line.CartItemId"
                                title="Eliminar">
                            <i class="fas fa-trash-alt"></i>
                        </button>
                    </div>
                </div>
            }
        </div>

        <div class="p-3 border-top">
            <button type="button" class="btn btn-sm btn-outline-secondary w-100 mb-3 js-cart-clear">
                <i class="fas fa-trash me-2"></i>Vaciar carrito
            </button>
        </div>
    }
</div>