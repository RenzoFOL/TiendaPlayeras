@model TiendaPlayeras.Web.Models.ProductVariant
@{
    ViewData["Title"] = "Editar Variante";
    var productName = ViewBag.ProductName as string ?? "Producto";
}

<div class="container py-4">
    <div class="row justify-content-center">
        <div class="col-12 col-lg-8">
            <!-- Encabezado -->
            <div class="d-flex justify-content-between align-items-center mb-4">
                <div>
                    <h2><i class="fas fa-edit text-primary"></i> Editar Variante</h2>
                    <p class="text-muted mb-0">
                        Producto: <strong>@productName</strong><br />
                        <small>Variante ID: @Model.Id</small>
                    </p>
                </div>
                <a class="btn btn-outline-secondary" 
                   asp-action="Variants" asp-route-productId="@Model.ProductId">
                    <i class="fas fa-arrow-left"></i> Volver
                </a>
            </div>

            <!-- Formulario -->
            <div class="card shadow-sm">
                <div class="card-header bg-light">
                    <h5 class="mb-0">
                        <i class="fas fa-th-large"></i> 
                        Variante: @Model.Fit - @Model.Color - @Model.Size
                    </h5>
                </div>
                <div class="card-body">
                    <form asp-action="EditVariant" asp-route-id="@Model.Id" 
                          asp-controller="Products" method="post">
                        @Html.AntiForgeryToken()
                        <input type="hidden" asp-for="Id" />
                        <input type="hidden" asp-for="ProductId" />
                        
                        <div asp-validation-summary="ModelOnly" class="alert alert-danger"></div>

                        <div class="row g-3">
                            <!-- Fit -->
<div class="col-12 col-md-6">
    <label asp-for="Fit" class="form-label fw-bold">
        <i class="fas fa-tshirt text-primary"></i> Fit *
    </label>
    <input asp-for="Fit" class="form-control" 
           placeholder="Ej: Hombre, Mujer, Unisex, Oversize" 
           list="fitOptions" />
    <datalist id="fitOptions">
        <option value="Hombre" />
        <option value="Mujer" />
        <option value="Unisex" />
        <option value="Oversize" />
        <option value="Boxy" />
    </datalist>
    <span asp-validation-for="Fit" class="text-danger small"></span>
</div>

<!-- Color -->
<div class="col-12 col-md-6">
    <label asp-for="Color" class="form-label fw-bold">
        <i class="fas fa-palette text-primary"></i> Color *
    </label>
    <input asp-for="Color" class="form-control" 
           placeholder="Ej: Negro, Blanco, #000000" 
           list="colorOptions" />
    <datalist id="colorOptions">
        <option value="Negro" />
        <option value="Blanco" />
        <option value="Rojo" />
        <option value="Azul" />
        <option value="Verde" />
        <option value="Gris" />
        <option value="Amarillo" />
        <option value="Rosa" />
    </datalist>
    <span asp-validation-for="Color" class="text-danger small"></span>
</div>

<!-- Talla -->
<div class="col-12 col-md-6">
    <label asp-for="Size" class="form-label fw-bold">
        <i class="fas fa-ruler-combined text-primary"></i> Talla *
    </label>
    <input asp-for="Size" class="form-control" 
           placeholder="Ej: S, M, L, XL" 
           list="sizeOptions" />
    <datalist id="sizeOptions">
        <option value="XS" />
        <option value="S" />
        <option value="M" />
        <option value="L" />
        <option value="XL" />
        <option value="XXL" />
        <option value="Yasui" />
    </datalist>
    <span asp-validation-for="Size" class="text-danger small"></span>
</div>

                            <!-- Código de Diseño -->
                            <div class="col-12 col-md-6">
                                <label asp-for="DesignCode" class="form-label fw-bold">
                                    <i class="fas fa-barcode text-primary"></i> Código de Diseño
                                </label>
                                <input asp-for="DesignCode" class="form-control" 
                                       placeholder="Código interno (opcional)" />
                                <span asp-validation-for="DesignCode" class="text-danger small"></span>
                            </div>

                            <!-- Precio -->
                            <div class="col-12 col-md-6">
                                <label asp-for="Price" class="form-label fw-bold">
                                    <i class="fas fa-dollar-sign text-success"></i> Precio *
                                </label>
                                <div class="input-group">
                                    <span class="input-group-text">$</span>
                                    <input asp-for="Price" type="number" step="0.01" 
                                           class="form-control" />
                                </div>
                                <span asp-validation-for="Price" class="text-danger small"></span>
                            </div>

                            <!-- Stock -->
                            <div class="col-12 col-md-6">
                                <label asp-for="Stock" class="form-label fw-bold">
                                    <i class="fas fa-boxes text-warning"></i> Stock *
                                </label>
                                <input asp-for="Stock" type="number" min="0" 
                                       class="form-control" />
                                <span asp-validation-for="Stock" class="text-danger small"></span>
                                <div class="form-text">
                                    @if (Model.Stock > 10)
                                    {
                                        <span class="text-success">
                                            <i class="fas fa-check-circle"></i> Stock saludable
                                        </span>
                                    }
                                    else if (Model.Stock > 0)
                                    {
                                        <span class="text-warning">
                                            <i class="fas fa-exclamation-triangle"></i> Stock bajo
                                        </span>
                                    }
                                    else
                                    {
                                        <span class="text-danger">
                                            <i class="fas fa-times-circle"></i> Sin stock
                                        </span>
                                    }
                                </div>
                            </div>

                            <!-- Estado Activo -->
                            <div class="col-12">
                                <div class="form-check form-switch">
                                    <input asp-for="IsActive" class="form-check-input" 
                                           type="checkbox" id="isActiveSwitch" />
                                    <label class="form-check-label fw-bold" for="isActiveSwitch">
                                        <i class="fas fa-eye text-info"></i> Variante activa (visible en tienda)
                                    </label>
                                </div>
                                <div class="form-text">
                                    Si desactivas esta variante, no aparecerá en la tienda pública
                                </div>
                            </div>
                        </div>

                        <!-- Botones -->
                        <hr class="my-4" />
                        <div class="d-flex gap-2 justify-content-end">
                            <a class="btn btn-outline-secondary" 
                               asp-action="Variants" asp-route-productId="@Model.ProductId">
                                <i class="fas fa-times"></i> Cancelar
                            </a>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> Guardar Cambios
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Historial (opcional - para futuras mejoras) -->
            <div class="card border-secondary mt-3">
                <div class="card-body">
                    <h6 class="card-title">
                        <i class="fas fa-history text-secondary"></i> Información de registro
                    </h6>
                    <small class="text-muted">
                        Esta variante fue creada el @DateTime.Now.ToString("dd/MM/yyyy")
                    </small>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}